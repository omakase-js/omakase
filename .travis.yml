language: node_js
node_js: node
cache:
  yarn: true
  directories:
    - node_modules
    - ".jest"

script:
  - yarn lint
  - yarn build
  - yarn jest

before_deploy: "echo "//registry.npmjs.org/:_authToken=$NPM_TOKEN" >> ~/.npmrc"
deploy:
  provider: script
  script: yarn release
  on:
    branch: master
